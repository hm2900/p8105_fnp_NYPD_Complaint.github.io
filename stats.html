<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Descriptive Statistics</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="proposal.html">About Us</a>
</li>
<li>
  <a href="descriptive_statistics.html">Descriptive Statistics</a>
</li>
<li>
  <a href="patterns.html">Comparison Patterns</a>
</li>
<li>
  <a href="shiny_dashboard.html">Shiny App</a>
</li>
<li>
  <a href="regression.html">Additional Analysis</a>
</li>
<li>
  <a href="report.html">Final Project Report</a>
</li>
<li>
  <a href="https://github.com/beryl66666/p8105_fnp_NYPDComplaint.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Descriptive Statistics</h1>

</div>


<pre class="r"><code>nypd_complaint_2020_data = 
  read_csv(&quot;./data/nypd_complaint_2020_data.csv&quot;)

nypd_complaint_2021_data = 
  read_csv(&quot;./data/nypd_complaint_2021_data.csv&quot;)

nypd_complaint_two_year_data = 
  read_csv(&quot;./data/nypd_complaint_two_year_data.csv&quot;)</code></pre>
<pre class="r"><code>complaint_df = nypd_complaint_two_year_data %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(
    !susp_age_group == c(&quot;UNKNNOWN&quot;),
     susp_age_group == c(&quot;&lt;18&quot;, &quot;18-24&quot;,&quot;25-44&quot;,&quot;45-64&quot;,&quot;65+&quot;),
    vic_age_group == c(&quot;&lt;18&quot;, &quot;18-24&quot;,&quot;25-44&quot;,&quot;45-64&quot;,&quot;65+&quot;)
  ) %&gt;% 
  mutate(
    susp_age_group = ifelse(susp_age_group %in% c(&quot;&lt;18&quot;, &quot;18-24&quot;, &quot;25-44&quot;, &quot;45-64&quot;, &quot;65+&quot;), susp_age_group, &quot;UNKNOWN&quot;),
    vic_age_group = ifelse(vic_age_group %in% c(&quot;&lt;18&quot;, &quot;18-24&quot;, &quot;25-44&quot;, &quot;45-64&quot;, &quot;65+&quot;), vic_age_group, &quot;UNKNOWN&quot;),
    vic_race = ifelse(is.na(vic_race), &quot;UNKNOWN&quot;, vic_race),
    vic_sex = ifelse(vic_sex %in% c(&quot;F&quot;, &quot;M&quot;), vic_sex, &quot;U&quot;),
    susp_sex = ifelse(susp_sex %in% c(&quot;F&quot;, &quot;M&quot;), susp_sex, &quot;U&quot;),
    susp_age_group = factor(susp_age_group),
    susp_race = factor(susp_race),
    susp_sex = factor(susp_sex),
    vic_age_group = factor(vic_age_group),
    vic_race = factor(vic_race),
    vic_sex = factor(vic_sex),
    boro_nm = factor(boro_nm)
  ) 
complaint_1 = 
  select(complaint_df, c(&quot;month&quot;, &quot;year&quot;, &quot;day&quot;, &quot;susp_age_group&quot; , &quot;boro_nm&quot; , &quot;loc_of_occur_desc&quot;, &quot;susp_sex&quot;, &quot;vic_age_group&quot;, &quot;vic_age_group&quot;, &quot;vic_sex&quot;)) 
complaint_1 = complaint_1 %&gt;% 
  mutate(
    month = as.numeric(month),
    month = str_pad(month,width = 2,side = &#39;left&#39;,pad = &#39;0&#39;),
    day = str_pad(day,width = 2,side = &#39;left&#39;,pad = &#39;0&#39;),
    month_day = str_c(month, &quot;-&quot;, day),
    month_day = factor(month_day)
    )
complaint_1 = complaint_1&lt;-cbind(complaint_1[10],complaint_1[,1:9])
complaint_1 = arrange_dt(complaint_1,dt)</code></pre>
<div id="compare-the-number-of-complaint-in-2020-and-2021"
class="section level2">
<h2>Compare the Number of Complaint in 2020 and 2021</h2>
<pre class="r"><code>complaint_1 %&gt;% 
  group_by(month_day, year) %&gt;% 
  summarize(obs = n()) %&gt;% 
  ggplot(aes(x = month_day, y = obs, group = year, color = as.factor(year)))+
  geom_line() + 
  geom_smooth(se = FALSE) +
  labs(title = &quot;Number of Complaint in 2020 and 2021&quot;, x = &quot;Complaint Date&quot;, y = &quot;Number of Complaint&quot;, col = &quot;Year&quot;) + 
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1, color = rep(c(&quot;black&quot;, rep(&quot;transparent&quot;, each = 15))))) +
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="stats_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>According to the information in the figure, we can know that
<strong>the average daily complaint volume in Manhattan in 2021 has
exceeded that in 2020 since about February</strong>, and continued to
the end of 2021. Moreover, the highest monthly complaint volume peaked
in 2021, for example, from May to October in 2021. So we can guess that
in 2020, people may be unable to go out due to the COVID-19, leading to
a decrease in the number of complaints.</p>
</div>
<div
id="number-of-complaintsuspects-in-2020-and-2021-by-age-group-and-gender"
class="section level2">
<h2>Number of complaint(suspects) in 2020 and 2021 by Age Group and
Gender:</h2>
<p>The New York Police Department has divided the main types of suspects
and victims in 2020-2021 into five groups according to age. They are
respectively &lt; Age 18, 18 to 24, 25 to 44, 45 to 64, 65 and older. We
sorted the data and got the following results：</p>
<pre class="r"><code>complaint_1 %&gt;% 
  group_by(susp_age_group, susp_sex) %&gt;% 
  summarize(obs = n()) %&gt;% 
  
  ggplot(aes(x = as.factor(susp_age_group), y = obs, group = susp_sex, color = as.factor(susp_sex))) +
  geom_line() + 
  geom_smooth() +
  labs(title = &quot;Number of complaint(suspects) in 2020 and 2021 by Age Group and Gender&quot;, x = &quot;Age group&quot;, y = &quot;Number of Complaint&quot;, col = &quot;Gender&quot;) </code></pre>
<p><img src="stats_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>As we can see from the graph, the number of malesuspects who were
complained about were much larger than the number of females and unknown
gender. <strong>A large number of the complained suspects are in the
25-44 age group</strong>, so we should be careful of 25-44 year old
males in case of danger.</p>
<pre class="r"><code>complaint_2 = complaint_1 %&gt;% 
  drop_na(susp_age_group, susp_sex) %&gt;% 
  group_by(susp_age_group, susp_sex) %&gt;% 
  summarize(obs = n())
  ggplot(complaint_2, aes(susp_age_group, y = obs,fill = susp_sex)) +
  geom_bar(position = &quot;dodge&quot;,stat = &quot;identity&quot;,colour = &quot;black&quot;)+
  
  labs(title = &quot;Number of complaint(suspects) in 2020 and 2021 by Age Group and Gender&quot;, x = &quot;Age group&quot;, y = &quot;Number of Complaint&quot;, col = &quot;Gender&quot;) </code></pre>
<p><img src="stats_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Through the bar chart we can clearly see that the number of suspects
is more than double the number of men than women in 2020 and 2021.</p>
</div>
<div
id="number-of-complaintvictims-in-2020-and-2021-by-age-group-and-gender"
class="section level2">
<h2>Number of complaint(victims) in 2020 and 2021 by Age Group and
Gender:</h2>
<pre class="r"><code>complaint_1 %&gt;% 
  group_by(vic_age_group, vic_sex) %&gt;% 
  summarize(obs = n()) %&gt;% 
  ggplot(aes(x = vic_age_group, y = obs, group = vic_sex, color = vic_sex)) +
  geom_line() + 
  geom_smooth() +
  labs(title = &quot;Number of complaint(victims) in 2020 and 2021 by Age Group and Gender&quot;, x = &quot;Age group&quot;, y = &quot;Number of Complaint&quot;, col = &quot;Gender&quot;) </code></pre>
<p><img src="stats_files/figure-html/unnamed-chunk-6-1.png" width="672" />
As can be seen from the graph, the number of Manhattan victims in 2020
and 2021 is much higher for female than male, and <strong>the victim
group is heavily concentrated in the age group of 25-44</strong>.
Therefore, women aged 25-44 years old need to pay extra attention to
their personal safety in Manhattan.</p>
</div>
<div id="prime-suspected-victim-site-in-2020-and-2021"
class="section level2">
<h2>Prime suspected victim site in 2020 and 2021：</h2>
<p>The NYPD categorized the main complaint sites for 2020-2021 by type
of location, such as banks, ATMs, apartments, streets, bus stops, cabs,
and hospitals. <strong>We wanted to understand the locations that would
be high frequency and turn into reported crime scenes</strong>, so we
categorized the data to get the following results.</p>
<pre class="r"><code>complaint_df %&gt;% 
  group_by(prem_typ_desc) %&gt;% 
  count(prem_typ_desc) %&gt;% 
  filter(n &gt; 2) %&gt;% 
  mutate(prem_typ_desc = fct_reorder(prem_typ_desc, n)) %&gt;% 
  ggplot(aes(x = prem_typ_desc, y = n )) + 
  geom_point(aes(color=n),alpha=0.5) + 
  geom_smooth( se = FALSE)+
  labs(title = &quot;Prime suspected victim site in 2020 and 2021&quot;,x = &quot;Location &quot;, y = &quot;Frequency&quot;) +
  theme(axis.text.x = element_text(angle = 60, hjust = 1))+
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="stats_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Analysis of the graphs shows that the frequency of crime locations is
<strong>home</strong> ,and it is the most frequent in 2020 and 2021,
followed by street and public housing.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
